---
title: |
    Использование Precompiled файла, для ускорения компиляции
date: 2011-07-03
authors: [FiloXSee]
tags: [c++, precompiled, оптимизация]
categories: [C++]
permalink: /blog/c_plus_plus/501.html
blogcat: C++
excerpt_separator: <!--cut-->
---

Реальные приложения могут иметь множество проектов в одном салюшине в Visual Studio. Эти проекты могут содержать сотни файлов исходного кода и это несомненно скажется на времени компиляции. Существует способ значительно ускорить компиляцию создав Precompiled файл.

Представьте, что у вас есть множество классов, каждый из которых имеет свои .h и .cpp файлы. При этом если несколько классов подключают один и тот же, то он будет компилироваться множество раз. Идея Precompiled файлов заключается в том, чтобы компилировать наиболее часто используемые модули всего один раз. Это значительно ускоряет процесс компиляции программы.

<!--cut-->


Давайте настроим проект в Visual Studio таким образом, чтобы использовать Precompiled файл. Для начала нужно создать два файла


```cpp
// создаем два файла
Precompiled.h
Precompiled.cpp


//Precompiled.h - этот файл должен содержать include для всех файлов, которые могут понадобится в этом модуле.
#include "class1.h"
#include "class2.h"
...

//Precompiled.cpp - должен содержать только одну строчку.
#include "Precompiled.h"
```


Поскольку Precompiled файл базовый, он должен быть включен во все .cpp файлы кода первым. Т.е. первой должна быть строчка

```cpp
#include "Precompiled.h".
```


#### Настройка проекта


Теперь перейдем к настройке проекта. Откройте свойства проекта, выберите в параметрах _Use Precompiled Header (/Yu)_ и укажите Precompiled.h как базовый файл.

![](http://itw66.ru/uploads/images/00/00/02/2011/07/03/cca9bb.jpg)


Теперь откройте свойства файла _Precompiled.cpp_ и укажите _Create Precompiled Header (/Yc)_. Именно этим вы говорите, что результат компиляции данного файла будет использоваться для создания .pch файла.

![](http://itw66.ru/uploads/images/00/00/02/2011/07/03/73cdca.jpg)


И в заключение убедитесь, что остальные файлы будут использовать созданных .pch файл. В их свойствах будет стоять _Use Precompiled Header (/Yu)_.

![](http://itw66.ru/uploads/images/00/00/02/2011/07/03/974822.jpg)


Данная методика очень полезна при настройке больших проектов. Она значительно ускорит компиляцию. Если в салюшине несколько проектов, то каждый из них должен содержать свой _Precompiled_ файл.
